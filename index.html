<!doctype html5>
<html>
  <head>
    <title>YouTube Unsubscriber</title>
  </head>

  <body>
    <h1 id="channel">Channel</h1>

    <button onclick="unsubscribe()">Unsubscribe</button>
    <button onclick="next()">Next</button>

    <a href="https://accounts.google.com/o/oauth2/v2/auth?client_id=1014849763208-08gqtnorimpl3h5hr0fd3ggsinbf1c73.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fyoutube&redirect_uri=https%3A%2F%2Fvassilevsky.github.io%2Fyoutube-unsubscriber%2F&response_type=token">Authenticate</a>

    <ul id="videos">
    </ul>

    <script>
      let access_token = location.hash.split("&").map(kv => kv.split("=")).find(kv => kv[0] == "#access_token")[1]

      request("https://www.googleapis.com/youtube/v3/subscriptions?mine=true&order=unread&&part=snippet&maxResults=50")

      function request(url) {
        fetch(url + "&access_token=" + access_token).then(response => console.log(response))
      }
    </script>
  </body>
</html>
